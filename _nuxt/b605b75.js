(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{369:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return h}));var r=n(8),o=(n(51),n(13),n(17),n(62),n(3)),c=function(){function e(e,t){switch(e){case"public":this.access="public";break;case"friend":this.access="friend";break;default:this.access="private"}this.id=t.uid,this.name=t.displayName,this.email=t.email}e.init=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e,t){o.a.onAuthStateChanged((function(n){n?e(n):t("Not Login")}))}));case 2:return r=t.sent,data=new e(n,r),t.abrupt("return",data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var t=e.prototype;return t.set=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.b.collection(this.access).doc(this.id).update(((r={})[t]=n,r));case 3:e.next=11;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,o.b.collection(this.access).doc(this.id).set({id:this.id});case 9:return e.next=11,o.b.collection(this.access).doc(this.id).update(((c={})[t]=n,c));case 11:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),t.get=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.collection(this.access).doc(this.id).get();case 2:if(data=e.sent.data(),null!=t){e.next=7;break}return e.abrupt("return",data);case 7:return e.abrupt("return",data[t]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getPoint=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.collection("public").doc(this.id).get();case 2:return data=e.sent.data().point,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setPoint=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(p){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.collection("public").doc(this.id).update({point:p});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setZukan=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(p){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("zukanID");case 2:if(e.t0=t=e.sent,null==e.t0){e.next=7;break}e.t1=t,e.next=8;break;case 7:e.t1=[];case 8:return n=e.t1,console.log(n),console.log(p),n.push(p),e.next=14,o.b.collection("public").doc(this.id).update({zukanID:n});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getAll=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("public"!=this.access&&"friend"!=this.access){e.next=9;break}return data=[],e.next=4,o.b.collection(this.access).limit(20).orderBy("point","desc").get();case 4:return e.next=6,e.sent.forEach((function(e){null==t?data.push({id:e.id,value:e.data()}):data.push({id:e.id,value:e.data()[t]})}));case 6:return e.abrupt("return",data);case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setFile=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.ref().child(this.id+"/"+t).put(n);case 2:return r=e.sent,e.abrupt("return",r.ref.getDownloadURL());case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.getFile=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.ref().child(this.id+"/"+t).getDownloadURL();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.deleteFile=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.ref().child(this.id+"/"+t).delete();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}();function h(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.d.ref().child(t+"/userPhoto").getDownloadURL();case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","default");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},435:function(e,t,n){var content=n(478);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("a5a5ad00",content,!0,{sourceMap:!1})},449:function(e,t,n){"use strict";n.r(t);var r=n(8),o=(n(30),n(42),n(28),n(77),n(70),n(48),n(463),n(19),n(53),n(51),n(528)),c=n(476),h=n(369),d=function(e,t,n,r,c){return void 0===e&&(e=""),void 0===t&&(t=24),void 0===n&&(n=300),void 0===r&&(r=!1),void 0===c&&(c=13684944),new o.d(e,{fontFamily:"Arial",fontSize:t,fill:c,wordWrap:!0,wordWrapWidth:n,breakWords:!0,align:r?"center":""})},f={mounted:function(){var e=this,t=new o.c;this.app=new o.a({width:500,height:500,antialiasing:!0,view:this.$refs.canvas,backgroundColor:5592405}),console.log("this.app",this.app),this.app.stage.addChild(this.currentScene),this.app.ticker.maxFPS=15,t.add("assets/bg.png").load((function(t,n){e.Begin()}))},data:function(){return{points:0,noClick:!1,currentScene:new o.b,id:this.$route.query.id}},asyncData:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.init("public");case 2:return t=e.sent,e.next=5,t.get("zukanID");case 5:if(n=e.sent,!0===Array.isArray(n)){e.next=9;break}return e.next=9,t.set("zukanID",[]);case 9:return e.abrupt("return",{db:t,dbList:n});case 10:case"end":return e.stop()}}),e)})))()},methods:{ZukanIDSet:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e>-1)){n.next=5;break}return(r=t.dbList).push(e),n.next=5,t.db.set("zukanID",r);case 5:case"end":return n.stop()}}),n)})))()},_shuffle:function(e){for(var t=e.slice(0),i=t.length-1;i>=0;i--){var n=Math.floor(Math.random()*(i+1)),r=[t[n],t[i]];t[i]=r[0],t[n]=r[1]}return t},_range:function(e){return Array.from({length:e},(function(e,t){return t}))},Begin:function(){this.app.stage.addChild(this.currentScene);var e=c.general;this.id&&(e=e.concat(c[this.id])),e=e.filter((function(i){return i})),this.questions=this._shuffle(e),this.now=-1,this.points=0,this.noClick=!1,this.Next()},Next:function(){this.now+=1,this.points>=2?(this.Win(),this.createRetry()):this.now>=this.questions.length?(this.Lose(),this.createRetry()):this.Question(this.questions[this.now])},Win:function(){var e=new d("勝利しました");if(e.position.set(50,200),this.currentScene.addChild(e),Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.init("public");case 2:return t=e.sent,e.t0=console,e.next=6,t.getPoint();case 6:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.t2=t,e.next=11,t.getPoint();case 11:return e.t3=e.sent,e.t4=e.t3+1,e.next=15,e.t2.setPoint.call(e.t2,e.t4);case 15:return e.t5=console,e.next=18,t.getPoint();case 18:e.t6=e.sent,e.t5.log.call(e.t5,e.t6);case 20:case"end":return e.stop()}}),e)})))(),this.id){var t=["egg","milk","wheat","soba","peanuts","shrimp","crab"].indexOf(this.id);this.ZukanIDSet(t)}},Lose:function(){var e=new d("敗北しました");e.position.set(50,200),this.currentScene.addChild(e)},createRetry:function(){var e=this,t=new d("リトライ");if(t.position.set(50,400),t.interactive=!0,t.buttonMode=!0,t.on("pointertap",(function(t){e.flush(),e.Begin()})),this.currentScene.addChild(t),!this.id){var n=new d("スキャンに戻る");n.position.set(50,450),n.interactive=!0,n.buttonMode=!0,n.on("pointertap",(function(t){e.flush(),e.$router.push({path:"scan"})})),this.currentScene.addChild(n)}},Question:function(q){var e=this,t=new d(q.question);t.position.set(50,100),this.currentScene.addChild(t);var n,r=this._shuffle(this._range(q.answer.length)),o=r.map((function(i){return q.answer[i]})),c=r.indexOf(0);for(var h in o){var f=50*Number.parseInt(h)+300,a=o[h];(n=new d(a,18,400)).interactive=!0,n.buttonMode=!0,n.on("pointertap",function(t){return function(n){e.noClick||(e.noClick=!0,c==t?e.Correct():e.Wrong(),console.log(e.points),setTimeout((function(){e.noClick=!1,e.flush(),e.Next()}),1e3))}}(h)),n.position.set(50,f),this.currentScene.addChild(n)}},Correct:function(){var e=new d("正解");return e.position.set(400,400),this.points+=1,this.currentScene.addChild(e),e},Wrong:function(){var e=new d("不正解");return e.position.set(400,400),this.currentScene.addChild(e),e},flush:function(){this.currentScene.visible=!1,this.app.stage.removeChild(this.currentScene),this.currentScene=new o.b,this.app.stage.addChild(this.currentScene)}}},l=(n(477),n(46)),component=Object(l.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{ref:"canvas",staticClass:"BattleCanvasDOM",attrs:{"scroll.prevent":""}})}),[],!1,null,null,null);t.default=component.exports},476:function(e){e.exports=JSON.parse('{"general":[{"question":"エピペンとは何でしょう。","answer":["アナフィラキシーに対する緊急補助治療に使用する注射薬。","アナフィラキシーに対する緊急補助治療に使用する頓服薬。"]},{"question":"エピペンは、アレルギー反応が疑われ、息苦しいときにも打っても問題ない？","answer":["はい","いいえ"]},{"question":"エピペンは、アナフィラキシーでない人に投与すると生命に関わるか？","answer":["いいえ","はい"]},{"question":"エピペンは、特定のアレルギーを持ってる人に効果が出ない場合があるか？","answer":["いいえ","はい"]}],"milk":[{"question":"乳化剤に乳は含まれていますか？","answer":["はい","いいえ"]},{"question":"乳糖に乳は含まれていますか？","answer":["はい","いいえ"]},{"question":"食品アレルギー表示に「乳」がありますが、次のうち正しい読み方はどちらですか？","answer":["にゅう","ちち"]},{"question":"牛乳アレルギーではないが牛乳を飲むと下痢などをしてしまう病気で、次の打ち正しいのはどちら？","answer":["乳糖不耐症","乳糖不全症"]},{"question":"牛乳がアレルゲンの場合、加熱することで発症率は下がるか？","answer":["いいえ","はい"]},{"question":"牛乳を摂取しないようにする場合代替が容易なのはタンパク質ですが、逆に困難なのは次のうちどれですか？","answer":["カルシウム","ミネラル"]}],"eggs":[{"question":"卵黄と卵白、どちらのほうが、発症しやすいですか","answer":["卵白","卵黄"]},{"question":"かまぼこなどには卵が含まれている場合はありますか？","answer":["はい","いいえ"]},{"question":"鶏卵がアレルゲンの人が、ウズラの卵を食べても問題ないか？","answer":["いいえ","はい"]},{"question":"鶏卵がアレルゲンの人が鶏肉を食べても問題ないか？","answer":["はい","いいえ"]},{"question":"鶏卵アレルゲンの人が卵の殻を食べても問題ないか？","answer":["はい","いいえ"]}],"soba":[{"question":"そばアレルギーは、空気中にまったそば粉でも発症する恐れがありますか？","answer":["はい","いいえ"]},{"question":"そばアレルギーは、そばと一緒にゆでたうどんでも発症する恐れがありますか？","answer":["はい","いいえ"]},{"question":"そばアレルギーの人は十割そばを食べても問題ないか？","answer":["いいえ","はい"]}],"peanut":[{"question":"ピーナッツ(落花生)は、殻にも発症の恐れがありますか？","answer":["はい","いいえ"]},{"question":"ピーナッツ(落花生)は、加熱する前と後どちらが反応しやすいですか。","answer":["加熱後","加熱前"]},{"question":"ピーナッツがアレルゲンの人は、必ず他のナッツ類によっても同様の症状が発症するか？","answer":["いいえ","はい"]}],"wheat":[{"question":"小麦は食後運動すると症状が出ることがありますか？","answer":["はい","いいえ"]},{"question":"「小麦を含む」と書いてある醤油や味噌は、小麦アレルギーを持つ人にとって危険ですか？","answer":["いいえ","はい"]},{"question":"麦芽糖には小麦は含まれていますか？","answer":["はい","いいえ"]}],"ebikani":[{"question":"エビアレルギーを持つ人は、カニアレルギーを持つ可能性が高いですか？","answer":["はい","いいえ"]},{"question":"エビ・カニアレルギーは成人で多いですか？","answer":["はい","いいえ"]}]}')},477:function(e,t,n){"use strict";n(435)},478:function(e,t,n){var r=n(15)(!1);r.push([e.i,"canvas{width:500px;height:500px}",""]),e.exports=r}}]);